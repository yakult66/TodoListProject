import{s as V,a as d}from"./index-Cx-JDICu.js";import{d as M,o as u,c as f,e as a,b as l,w as t,u as s,h as b,k as m,Q as n,t as i,g as v}from"./index-RzDfxWVG.js";import"./index-D2eKEP5R.js";import{b as c,a as U}from"./index-Bky_6eJE.js";import"./index-57Z-SuWt.js";import"./index-6DpBVoxs.js";const O={class:"min-h-screen w-full p-4 md:p-10 lg:p-16 bg-linear-to-br from-[#eef2ff] to-[#f8fafc]"},S={class:"w-full max-w-[1000px] mx-auto bg-white/80 backdrop-blur-xl rounded-[2.5rem] border border-white/60 shadow-[0_30px_60px_-15px_rgba(0,0,0,0.05)] p-6 md:p-12 flex flex-col h-fit"},N={class:"flex flex-wrap items-center justify-between gap-2 mb-4"},T={class:"flex items-center gap-2"},k={class:"font-bold text-slate-700"},P={class:"text-slate-500"},C={key:0,class:"text-[12px] text-indigo-500 bg-indigo-50 px-2.5 py-1 rounded-lg font-bold"},I={key:0,class:"text-[12px] text-center text-indigo-500 bg-indigo-50 px-2.5 py-1 rounded-lg font-bold"},L={class:"text-slate-400 text-sm"},E=M({__name:"historyPage",setup(A){const y=b(5),g=m(()=>JSON.parse(localStorage.getItem("historyTasks")||"[]")),x=m(()=>JSON.parse(localStorage.getItem("user")||"{}")),_=m(()=>g.value.filter(h=>h.createUser===x.value.account||h.assignedTo===x.value.name)),p=b(),w=()=>{p.value={title:{value:"",matchMode:n.CONTAINS},content:{value:"",matchMode:n.CONTAINS},assignedTo:{value:"",matchMode:n.CONTAINS},createUser:{value:"",matchMode:n.CONTAINS}}};w();const F=()=>{w()};return(h,r)=>(u(),f("div",O,[a("div",S,[l(s(V),{filters:p.value,"onUpdate:filters":r[1]||(r[1]=e=>p.value=e),filterDisplay:"menu",value:_.value,scrollable:"",scrollHeight:"flex",paginator:"",rows:y.value,rowsPerPageOptions:[5,10,20,50],paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"第 {first} 頁 ｜ 共 {totalPages} 頁",tableStyle:"min-width: 50rem"},{header:t(()=>[a("div",N,[r[2]||(r[2]=a("div",{class:"flex items-center gap-3"},[a("div",{class:"bg-indigo-500 text-white w-10 h-10 flex items-center justify-center rounded-xl shadow-lg shadow-indigo-200"},[a("i",{class:"pi pi-history text-lg"})]),a("span",{class:"text-xl font-bold text-slate-800"},"歷史完成事項")],-1)),a("div",T,[l(s(U),{icon:"pi pi-filter",label:"清除篩選",onClick:r[0]||(r[0]=e=>F()),class:"!bg-transparent !border !border-slate-300 !text-slate-500 hover:!bg-slate-50"})])])]),footer:t(()=>[a("div",L," 總共 "+i(g.value.length)+" 筆完成事項 ",1)]),default:t(()=>[l(s(d),{field:"title",sortable:"",header:"標題",showFilterMatchModes:!1,showFilterOperator:!1,style:{"min-width":"150px"}},{body:t(e=>[a("span",k,i(e.data.title),1)]),filter:t(({filterModel:e})=>[l(s(c),{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,showFilterMatchModes:!1,showFilterOperator:!1,type:"text",placeholder:"Search by title"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(s(d),{field:"content",sortable:"",header:"內容",showFilterMatchModes:!1,showFilterOperator:!1,style:{"min-width":"200px"}},{body:t(e=>[a("span",P,i(e.data.content),1)]),filter:t(({filterModel:e})=>[l(s(c),{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,showFilterMatchModes:!1,showFilterOperator:!1,type:"text",placeholder:"Search by content"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(s(d),{field:"assignedTo",sortable:"",header:"指派給",showFilterMatchModes:!1,showFilterOperator:!1,style:{"min-width":"120px"}},{body:t(e=>[e.data.assignedTo?(u(),f("span",C," @ "+i(e.data.assignedTo),1)):v("",!0)]),filter:t(({filterModel:e})=>[l(s(c),{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,showFilterMatchModes:!1,showFilterOperator:!1,type:"text",placeholder:"Search by assignedTo"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(s(d),{field:"createUser",sortable:"",header:"建立者",showFilterMatchModes:!1,showFilterOperator:!1,style:{"min-width":"120px"}},{body:t(e=>[e.data.createUser?(u(),f("span",I," @ "+i(e.data.createUser),1)):v("",!0)]),filter:t(({filterModel:e})=>[l(s(c),{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,showFilterMatchModes:!1,showFilterOperator:!1,type:"text",placeholder:"Search by createUser"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["filters","value","rows"])])]))}});export{E as default};
