import{s as V,a as p}from"./index-Clvewr2n.js";import{d as U,o as m,c as f,b as a,u as s,w as t,k as b,h as y,Q as u,e as o,t as n,g as _,a as M,U as T,V as k,W as O}from"./index-CcUtrgh4.js";import"./index-C9YFVpAG.js";import{b as h,a as S}from"./index-CVRQDlBo.js";import"./index-BSZcP_5r.js";import"./index-DIsoinB0.js";const N={class:"w-full max-w-[1000px] mx-auto bg-white/80 backdrop-blur-xl rounded-[2.5rem] border border-white/60 shadow-[0_30px_60px_-15px_rgba(0,0,0,0.05)] p-6 md:p-12 flex flex-col h-fit"},P={class:"flex flex-wrap items-center justify-between gap-2 mb-4"},C={class:"flex items-center gap-2"},I={class:"font-bold text-slate-700"},$={class:"text-slate-500"},A={key:0,class:"text-[12px] text-indigo-500 bg-indigo-50 px-2.5 py-1 rounded-lg font-bold"},L={key:0,class:"text-[12px] text-center text-indigo-500 bg-indigo-50 px-2.5 py-1 rounded-lg font-bold"},D={class:"text-slate-400 text-sm"},R=U({__name:"historyTodo",props:{historyTask:{type:Array,require:!0},loginUser:{type:Object}},setup(v){const l=v,d=b(()=>l.historyTask.filter(w=>w.createUser===l.loginUser.account||w.assignedTo===l.loginUser.name)),g=y(5),c=y(),x=()=>{c.value={title:{value:"",matchMode:u.CONTAINS},content:{value:"",matchMode:u.CONTAINS},assignedTo:{value:"",matchMode:u.CONTAINS},createUser:{value:"",matchMode:u.CONTAINS}}};x();const F=()=>{x()};return(w,i)=>(m(),f("div",N,[a(s(V),{filters:c.value,"onUpdate:filters":i[1]||(i[1]=e=>c.value=e),filterDisplay:"menu",value:d.value,scrollable:"",scrollHeight:"flex",paginator:"",rows:g.value,rowsPerPageOptions:[5,10,20,50],paginatorTemplate:"RowsPerPageDropdown FirstPageLink PrevPageLink CurrentPageReport NextPageLink LastPageLink",currentPageReportTemplate:"第 {first} 頁 ｜ 共 {totalPages} 頁",tableStyle:"min-width: 50rem"},{header:t(()=>[o("div",P,[i[2]||(i[2]=o("div",{class:"flex items-center gap-3"},[o("div",{class:"bg-indigo-500 text-white w-10 h-10 flex items-center justify-center rounded-xl shadow-lg shadow-indigo-200"},[o("i",{class:"pi pi-history text-lg"})]),o("span",{class:"text-xl font-bold text-slate-800"},"歷史完成事項")],-1)),o("div",C,[a(s(S),{icon:"pi pi-filter",label:"清除篩選",onClick:i[0]||(i[0]=e=>F()),class:"!bg-transparent !border !border-slate-300 !text-slate-500 hover:!bg-slate-50"})])])]),footer:t(()=>[o("div",D," 總共 "+n(d.value?.length)+" 筆完成事項 ",1)]),default:t(()=>[a(s(p),{field:"title",sortable:"",header:"標題",showFilterMatchModes:!1,showFilterOperator:!1,style:{"min-width":"150px"}},{body:t(e=>[o("span",I,n(e.data.title),1)]),filter:t(({filterModel:e})=>[a(s(h),{modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,showFilterMatchModes:!1,showFilterOperator:!1,type:"text",placeholder:"Search by title"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(s(p),{field:"content",sortable:"",header:"內容",showFilterMatchModes:!1,showFilterOperator:!1,style:{"min-width":"200px"}},{body:t(e=>[o("span",$,n(e.data.content),1)]),filter:t(({filterModel:e})=>[a(s(h),{modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,showFilterMatchModes:!1,showFilterOperator:!1,type:"text",placeholder:"Search by content"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(s(p),{field:"assignedTo",sortable:"",header:"指派給",showFilterMatchModes:!1,showFilterOperator:!1,style:{"min-width":"120px"}},{body:t(e=>[e.data.assignedTo?(m(),f("span",A," @ "+n(e.data.assignedTo),1)):_("",!0)]),filter:t(({filterModel:e})=>[a(s(h),{modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,showFilterMatchModes:!1,showFilterOperator:!1,type:"text",placeholder:"Search by assignedTo"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),a(s(p),{field:"createUser",sortable:"",header:"建立者",showFilterMatchModes:!1,showFilterOperator:!1,style:{"min-width":"120px"}},{body:t(e=>[e.data.createUser?(m(),f("span",L," @ "+n(e.data.createUser),1)):_("",!0)]),filter:t(({filterModel:e})=>[a(s(h),{modelValue:e.value,"onUpdate:modelValue":r=>e.value=r,showFilterMatchModes:!1,showFilterOperator:!1,type:"text",placeholder:"Search by createUser"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["filters","value","rows"])]))}}),j={class:"min-h-screen w-full p-4 md:p-10 lg:p-16 bg-linear-to-br from-[#eef2ff] to-[#f8fafc]"},Q=U({__name:"historyPage",setup(v){const l=y([]);M(()=>{l.value=JSON.parse(localStorage.getItem("historyTasks")||"[]")}),T(l,JSON.parse(localStorage.getItem("historyTasks")||"[]"));const d=b(()=>JSON.parse(localStorage.getItem("user")||"{}")),g=b(()=>({historyTask:l.value,loginUser:d.value}));return(c,x)=>(m(),f("div",j,[a(R,k(O(g.value)),null,16)]))}});export{Q as default};
