import{d as B,o as m,f as p,w as n,u as s,e as l,b as d,l as g,g as b,X as j,h as v,k as S,_ as T}from"./index-CcUtrgh4.js";import{b as k,a as q}from"./index-CVRQDlBo.js";import{s as F}from"./index-BjRKAaXC.js";import{s as U,b as L}from"./index-RF4_UjY0.js";import{s as x}from"./index-BnaObSPW.js";import{s as C}from"./index-DIsoinB0.js";const O={class:"flex flex-col gap-4"},X={class:"flex flex-col gap-6"},z={class:"relative flex items-center w-full"},D={class:"flex flex-row gap-2"},E={class:"flex items-center gap-2"},G={class:"flex items-center gap-2"},Y=B({__name:"regisUser",props:{users:{type:Array,required:!0}},emits:["register"],setup(I,{emit:M}){const a=v(""),r=v(""),i=v(""),f=v("user"),u=v(""),c=v(!0),$=M,w=I,V=async()=>{if(!o.value)return;const y=await L.hashSync(r.value,10);if(w.users.find(t=>t.account===a.value+"@gmail.com")){alert("帳號已存在");return}const e={account:a.value+"@gmail.com",password:y,name:i.value,role:f.value,status:!0,friends:[],id:w.users.length+1};$("register",e),alert("註冊成功"),P()},N=()=>{a.value.includes("@")?(a.value=a.value.replace(/@/g,""),c.value=!1):c.value=!0},o=S(()=>{const y=a.value.trim()!==""&&r.value.trim()!==""&&u.value.trim()!==""&&i.value.trim()!=="",e=r.value===u.value,t=!a.value.includes("@")&&c.value;return y&&e&&t}),P=()=>{a.value="",r.value="",i.value="",u.value="",c.value=!0},A=()=>{T.push({name:"loginUser"})};return(y,e)=>(m(),p(s(F),{class:"w-[90%] md:w-[50%] max-w-[500px] bg-white/70 backdrop-blur-[20px] rounded-4xl md:rounded-[3rem] border border-white/40 shadow-[0_25px_50px_-12px_rgba(0,0,0,0.01)] p-8 md:p-12"},{title:n(()=>[...e[6]||(e[6]=[l("div",{class:"flex justify-center items-center text-2xl font-bold mb-6 md:mb-10"},"註冊",-1)])]),content:n(()=>[l("form",{onSubmit:j(V,["prevent"])},[l("div",O,[l("div",X,[l("div",z,[d(s(k),{modelValue:a.value,"onUpdate:modelValue":e[0]||(e[0]=t=>a.value=t),type:"text",onInput:N,placeholder:"請輸入帳號",invalid:o.value&&!a.value,class:"w-full border-none! bg-slate-50/80! rounded-2xl! pl-6! pr-28! py-4! shadow-inner! outline-none focus:ring-2! focus:ring-indigo-100! transition-all!"},null,8,["modelValue","invalid"]),e[7]||(e[7]=l("span",{class:"absolute right-6 text-slate-400 opacity-60 pointer-events-none select-none font-medium"}," @gmail.com ",-1))]),o.value&&!a.value?(m(),p(s(x),{key:0,severity:"error",closable:!1,class:"mt-2 transition-opacity"},{default:n(()=>[...e[8]||(e[8]=[g(" 帳號為必填 ",-1)])]),_:1})):b("",!0),c.value?b("",!0):(m(),p(s(x),{key:1,severity:"error",closable:!1,class:"mt-2 transition-opacity"},{default:n(()=>[...e[9]||(e[9]=[g(" 帳號格式錯誤，請輸入@gmail.com前的帳號 ",-1)])]),_:1})),d(s(U),{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=t=>r.value=t),placeholder:"請輸入密碼",toggleMask:!0,feedback:!0,class:"w-full",invalid:o.value&&!r.value,inputClass:"w-full border-none! bg-slate-50/80! rounded-2xl! px-6! py-4! shadow-inner! outline-none focus:ring-2! focus:ring-indigo-100! transition-all!",toggleMaskIcon:"pi pi-eye"},null,8,["modelValue","invalid"]),o.value&&!r.value?(m(),p(s(x),{key:2,severity:"error",closable:!1,class:"mt-2 transition-opacity"},{default:n(()=>[...e[10]||(e[10]=[g(" 密碼為必填 ",-1)])]),_:1})):b("",!0),d(s(U),{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=t=>u.value=t),placeholder:"請再次輸入密碼",toggleMask:!0,feedback:!1,class:"w-full",invalid:o.value&&!u.value,inputClass:"w-full border-none! bg-slate-50/80! rounded-2xl! px-6! py-4! shadow-inner! outline-none focus:ring-2! focus:ring-indigo-100! transition-all!",toggleMaskIcon:"pi pi-eye"},null,8,["modelValue","invalid"]),o.value&&!u.value?(m(),p(s(x),{key:3,severity:"error",closable:!1,class:"mt-2 transition-opacity"},{default:n(()=>[...e[11]||(e[11]=[g(" 確認密碼為必填 ",-1)])]),_:1})):b("",!0),d(s(k),{modelValue:i.value,"onUpdate:modelValue":e[3]||(e[3]=t=>i.value=t),placeholder:"請輸入姓名",invalid:o.value&&!i.value,class:"w-full border-none! bg-slate-50/80! rounded-2xl! px-6! py-4! shadow-inner! outline-none focus:ring-2! focus:ring-indigo-100! transition-all!"},null,8,["modelValue","invalid"]),o.value&&!i.value?(m(),p(s(x),{key:4,severity:"error",closable:!1,class:"mt-2 transition-opacity"},{default:n(()=>[...e[12]||(e[12]=[g(" 姓名為必填 ",-1)])]),_:1})):b("",!0),l("div",D,[e[15]||(e[15]=l("label",{class:"text-slate-600 font-semibold ml-1"},"角色：",-1)),l("div",E,[d(s(C),{modelValue:f.value,"onUpdate:modelValue":e[4]||(e[4]=t=>f.value=t),inputId:"role_admin",name:"role",value:"admin"},null,8,["modelValue"]),e[13]||(e[13]=l("label",{for:"role_admin",class:"cursor-pointer text-slate-600"},"管理員",-1))]),l("div",G,[d(s(C),{modelValue:f.value,"onUpdate:modelValue":e[5]||(e[5]=t=>f.value=t),inputId:"role_user",name:"role",value:"user"},null,8,["modelValue"]),e[14]||(e[14]=l("label",{for:"role_user",class:"cursor-pointer text-slate-600"},"使用者",-1))])])]),d(s(q),{label:"註冊",disabled:!o.value,onClick:V,type:"submit",class:"bg-linear-to-br! border-none! rounded-3xl! w-full"},null,8,["disabled"])])],32)]),footer:n(()=>[l("div",{class:"flex justify-center w-full mt-4"},[l("button",{type:"button",class:"flex items-center gap-2 text-slate-400 hover:text-indigo-600 transition-all duration-300 group bg-transparent border-none cursor-pointer",onClick:A},[...e[16]||(e[16]=[l("i",{class:"pi pi-arrow-left text-sm group-hover:-translate-x-1 transition-transform"},null,-1),l("span",{class:"font-medium"},"返回登入",-1)])])])]),_:1}))}});export{Y as default};
